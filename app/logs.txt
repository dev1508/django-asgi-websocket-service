INFO:     Started server process [17107]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
{"timestamp": "2025-08-06 02:35:45,378", "level": "INFO", "message": "Session Id: a17b530e-8241-469b-bef7-770225cce82c", "request_id": "1ebe9052-aaf2-4ab5-bd6d-04735a755f1b"}
{"timestamp": "2025-08-06 02:35:45,378", "level": "INFO", "message": "WebSocket connected", "request_id": "1ebe9052-aaf2-4ab5-bd6d-04735a755f1b"}
{"timestamp": "2025-08-06 02:35:45,378", "level": "INFO", "message": "Total active connections: 1", "request_id": "1ebe9052-aaf2-4ab5-bd6d-04735a755f1b"}
INFO:     ('127.0.0.1', 59945) - "WebSocket /ws/chat/" [accepted]
INFO:     connection open
{"timestamp": "2025-08-06 02:35:46,933", "level": "INFO", "message": "Received message 1: ko", "request_id": "c5a97a61-2400-418a-977e-a5aeae52d8bc"}
{"timestamp": "2025-08-06 02:35:47,808", "level": "INFO", "message": "Received message 2: erf", "request_id": "76e3447f-3930-4c11-b88b-677f2cb39e40"}
{"timestamp": "2025-08-06 02:35:48,543", "level": "INFO", "message": "Received message 3: erf", "request_id": "47571846-bfae-4b68-a304-f58be7fd4f09"}
{"timestamp": "2025-08-06 02:36:14,428", "level": "INFO", "message": "Healthz check called", "request_id": "b308d66c-e49b-4c64-bb5a-731294d8c88d"}
[Heartbeat] Broadcasting to 1 clients at 2025-08-06T02:35:50.804098
INFO:     127.0.0.1:60015 - "GET /healthz HTTP/1.1" 200 OK
[Heartbeat] Broadcasting to 1 clients at 2025-08-06T02:36:20.805696
INFO:     127.0.0.1:60033 - "GET /metrics HTTP/1.1" 200 OK
INFO:     127.0.0.1:60046 - "GET /metrics HTTP/1.1" 200 OK
[Heartbeat] Broadcasting to 1 clients at 2025-08-06T02:36:50.807517
INFO:     127.0.0.1:60051 - "GET /metrics HTTP/1.1" 200 OK
INFO:     Shutting down
INFO:     connection closed
{"timestamp": "2025-08-06 02:38:35,104", "level": "INFO", "message": "WebSocket disconnected", "request_id": "0bd6231b-a9ed-4a29-9f3d-554d2c7c2e69"}
{"timestamp": "2025-08-06 02:38:35,105", "level": "INFO", "message": "Remaining connections: 0", "request_id": "0bd6231b-a9ed-4a29-9f3d-554d2c7c2e69"}
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [17107]

Aborted!
[Heartbeat] Broadcasting to 1 clients at 2025-08-06T02:37:20.808700
[Heartbeat] Broadcasting to 1 clients at 2025-08-06T02:37:50.811827
[Heartbeat] Broadcasting to 1 clients at 2025-08-06T02:38:20.813293
[Shutdown] Initiated. Closing all WebSocket connections...
[Shutdown] Heartbeat task cancelled.
shutdown_deadline - <Task pending name='Task-34' coro=<sleep() running at /Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/asyncio/tasks.py:636>>
[Shutdown] Attempting to close 0 active connections...
close_tasks - []
[Shutdown] Gracefully closed 0 connections (or they were already closed).
[Shutdown] Closed 0 connections.
